

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nresp National responsibility and biodiversity assessment tools &mdash; nresp 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nresp 0.1 documentation" href="index.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">nresp 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-nresp">
<span id="nresp-national-responsibility-and-biodiversity-assessment-tools"></span><h1><a class="reference internal" href="#module-nresp" title="nresp: general nresp library"><tt class="xref py py-mod docutils literal"><span class="pre">nresp</span></tt></a> National responsibility and biodiversity assessment tools<a class="headerlink" href="#module-nresp" title="Permalink to this headline">¶</a></h1>
<div class="section" id="functions">
<h2>functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="nresp.__init__">
<tt class="descclassname">nresp.</tt><tt class="descname">__init__</tt><big>(</big><big>)</big><a class="headerlink" href="#nresp.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>initialize the nresp()</p>
</dd></dl>

<dl class="function">
<dt id="nresp.conndb">
<tt class="descclassname">nresp.</tt><tt class="descname">conndb</tt><big>(</big><big>)</big><a class="headerlink" href="#nresp.conndb" title="Permalink to this definition">¶</a></dt>
<dd><p>connecting the database</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span> <span class="o">=</span> <span class="n">nresp</span><span class="o">.</span><span class="n">nresp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">conndb</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_area">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_area</tt><big>(</big><em>&lt;table&gt;</em>, <em>&lt;geometry column&gt;</em><span class="optional">[</span>, <em>criteria column</em><span class="optional">]</span><span class="optional">[</span>, <em>criteria value</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_area" title="Permalink to this definition">¶</a></dt>
<dd><p>calc_area will calculate the total area (square kilometers) of given criteria and return float number
(unit: square kilometers)</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">calc_area</span><span class="p">(</span><span class="s">&#39;asia_countries&#39;</span><span class="p">,</span> <span class="s">&#39;the_geom&#39;</span><span class="p">)</span>
<span class="go">44914379.5764</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">calc_area</span><span class="p">(</span><span class="s">&#39;asia_countries&#39;</span><span class="p">,</span> <span class="s">&#39;the_geom&#39;</span><span class="p">,</span>  <span class="s">&#39;cntry_name&#39;</span><span class="p">,</span> <span class="s">&#39;Taiwan&#39;</span><span class="p">)</span>
<span class="go">36021.0007</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">calc_area() use postgis ST_Area(geom::geography) to calculate the area,
thus the geometry column of given table should be valid WGS 1984 (EPSG:4326) coordinate system</p>
</div>
<dl class="function">
<dt id="nresp.cal_dpexp">
<tt class="descclassname">nresp.</tt><tt class="descname">cal_dpexp</tt><big>(</big><em>&lt;sp&gt;</em>, <em>&lt;sp_tab&gt;</em>, <em>&lt;sp_col&gt;</em>, <em>&lt;geo_tab&gt;</em>, <em>&lt;ref_area&gt;</em><span class="optional">[</span>, <em>sp_geom_col='the_geom'</em><span class="optional">]</span><span class="optional">[</span>, <em>geo_geom_col='the_geom'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.cal_dpexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate expected distribution patterns (dpexp).
&#8216;dpexp&#8217; is defined as distribution in reference area / total reference area.</p>
<p>The distribution in reference area is intersecting areas of &lt;sp&gt;
(in table &lt;sptab&gt; of column &lt;sp_col&gt;) and &lt;geo_tab&gt;. &lt;ref_area&gt; is
the total area of given reference area (floating number).</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">cal_dpexp</span><span class="p">(</span><span class="s">&#39;Babina adenopleura&#39;</span><span class="p">,</span> <span class="s">&#39;all_amphibians_oct2012_s&#39;</span><span class="p">,</span> <span class="s">&#39;binomial&#39;</span><span class="p">,</span> <span class="s">&#39;gensv2_s&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_dpobs">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_dpobs</tt><big>(</big><em>&lt;cntry&gt;</em>, <em>&lt;foc_area&gt;</em><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_dpobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate observed distribution patterns (dpobs). dpobs = distribution in focal area / total focal area</p>
<p>Parameters:
&lt;cntry&gt; is the target table name to store dpobs values
(default table name is o_&lt;cntry&gt;) ; &lt;foc_area&gt; is the total focal area (floating number).</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_dpobs</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">,</span> <span class="s">&#39;20101.35&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_global">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_global</tt><big>(</big><em>&lt;cntry&gt;</em>, <em>&lt;col&gt;</em><span class="optional">[</span>, <em>crlower=1</em><span class="optional">]</span><span class="optional">[</span>, <em>crupper=3</em><span class="optional">]</span><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_global" title="Permalink to this definition">¶</a></dt>
<dd><p>:function::calc_global() will calculate the global distribution value (0: local; 1: regional; 2: global/wide distribution) and update values to table &lt;cntry&gt;.</p>
<p>&lt;cntry&gt; is the target table name, and &lt;col&gt; is the column name of intersecting numbers of bioecoregion (ex: biomes). [crlower] is the threshold of lower value (integer; default is 1) to determine the global distribution patterns, while [crupper] is the threshold of upper value (integer; default is 3). If the values in &lt;col&gt; is [crlower], it indicates the species distribution pattern is local (column &lt;global_distr&gt; is set to 0); if the values in &lt;col&gt; is greater than [crlower] and less and equal than [crupper], the distribution pattern is regional (&lt;global_distr&gt; set to 1); if the values in &lt;col&gt; is greater than [crupper], the distribution pattern is wide/global.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">calc_global</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">,</span> <span class="s">&#39;biome&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_resp">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_resp</tt><big>(</big><em>&lt;cntry&gt;</em><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_resp" title="Permalink to this definition">¶</a></dt>
<dd><p>calc_resp_val will calculate national responsibility values according to         dpobs/dpexp (i.e. resp column in output tables) thresholds. The default threshold is 2</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span> <span class="n">nc</span><span class="o">.</span><span class="n">calc_resp_val</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_resp_val">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_resp_val</tt><big>(</big><em>&lt;cntry&gt;</em><span class="optional">[</span>, <em>thres=2</em><span class="optional">]</span><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_resp_val" title="Permalink to this definition">¶</a></dt>
<dd><p>calc_resp_val will calculate national responsibility values according to         dpobs/dpexp (i.e. resp column in output tables) thresholds. The default threshold is 2</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span> <span class="n">nc</span><span class="o">.</span><span class="n">calc_resp_val</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.calc_resp_class">
<tt class="descclassname">nresp.</tt><tt class="descname">calc_resp_class</tt><big>(</big><em>&lt;cntry&gt;</em><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.calc_resp_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the national responsibility class (require iucn_category table)</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_resp_class</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.create_ocntry_tab">
<tt class="descclassname">nresp.</tt><tt class="descname">create_ocntry_tab</tt><big>(</big><em>&lt;cntry&gt;</em><span class="optional">[</span>, <em>prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.create_ocntry_tab" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will create a table named with prefix_cntry to store output values (default prefix is &#8216;o&#8217;)</p>
<p>The output table schema is:
o_cntry(binomial character varying, iucn_status character(2), g_num integer, global_distr integer, sp_area double precision, dpexp double precision, dpobs double precision, resp double precision, resp_val integer, resp_class integer</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">create_ocntry_tab</span><span class="p">(</span><span class="s">&#39;taiwan&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">create_ocntry_tab will destroy existing table!</p>
</div>
<dl class="function">
<dt id="nresp.find_gensv2">
<tt class="descclassname">nresp.</tt><tt class="descname">find_gensv2</tt><big>(</big><em>&lt;sp&gt;</em><big>)</big><a class="headerlink" href="#nresp.find_gensv2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="nresp.intst_area">
<tt class="descclassname">nresp.</tt><tt class="descname">intst_area</tt><big>(</big><em>&lt;a_tab&gt;</em>, <em>&lt;a&gt;</em>, <em>&lt;a_col&gt;</em>, <em>&lt;b_tab&gt;</em>, <em>&lt;b_col&gt;</em><span class="optional">[</span>, <em>geom_acol='the_geom'</em><span class="optional">]</span><span class="optional">[</span>, <em>geom_bcol='the_geom'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.intst_area" title="Permalink to this definition">¶</a></dt>
<dd><p>intst_area() will find the intersecting area of given two polygons (or two multipolygons).
&lt;a_tab&gt; and &lt;b_tab&gt; are the the table names with a valid polygon geometry column (default is &#8216;the_geom&#8217;). &lt;a&gt; is target attribute in &lt;a_col&gt;, while &lt;b_col&gt; is the target attribute to intersect with &lt;a&gt; in &lt;a_col&gt;.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">intst_area</span><span class="p">(</span><span class="s">&#39;all_amphibians_oct2012_s&#39;</span><span class="p">,</span> <span class="s">&#39;Babina adenopleura&#39;</span><span class="p">,</span> <span class="s">&#39;binomial&#39;</span><span class="p">,</span> <span class="s">&#39;asia_countries&#39;</span><span class="p">,</span> <span class="s">&#39;cntry_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.intst_geom_cntrytab">
<tt class="descclassname">nresp.</tt><tt class="descname">intst_geom_cntrytab</tt><big>(</big><em>&lt;cntry_tab&gt;</em>, <em>&lt;cntry&gt;</em>, <em>&lt;cntry_col&gt;</em>, <em>&lt;geo_tab&gt;</em>, <em>&lt;geo_col&gt;</em><span class="optional">[</span>, <em>cntry_geom='the_geom'</em><span class="optional">]</span><span class="optional">[</span>, <em>geo_geom='the_geom'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.intst_geom_cntrytab" title="Permalink to this definition">¶</a></dt>
<dd><p>intersecting country and bioecozones, then calculate the area of given bioecozones in specific country</p>
<p>Examples:</p>
</dd></dl>

<dl class="function">
<dt id="nresp.update_cntry_col">
<tt class="descclassname">nresp.</tt><tt class="descname">update_cntry_col</tt><big>(</big><em>&lt;sp&gt;</em>, <em>&lt;sp_col&gt;</em>, <em>&lt;cntry&gt;</em>, <em>&lt;ucol&gt;</em>, <em>&lt;otab&gt;</em>, <em>&lt;ocol&gt;</em><span class="optional">[</span>, <em>cntry_tab_prefix='o'</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.update_cntry_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Update output table from another table for a specific species.</p>
<p>Detail and parameters:</p>
<blockquote>
<div>This function will update output table (i.e. [cntry_tab_prefix]_&lt;cntry&gt;) column &lt;ucol&gt; from another table &lt;otab&gt;&#8217;s column &lt;ocol&gt; where the &lt;sp&gt; in &lt;sp_col&gt; is the same in output table</div></blockquote>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">update_cntry_col</span><span class="p">(</span><span class="s">&#39;Babina adenopleura&#39;</span><span class="p">,</span> <span class="s">&#39;binomial&#39;</span><span class="p">,</span> <span class="s">&#39;taiwan&#39;</span><span class="p">,</span> <span class="s">&#39;dpexp&#39;</span><span class="p">,</span>
<span class="go">                      &#39;all_amphibians_oct2012_s&#39;, &#39;dpexp&#39;)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">update_cntry_col</span><span class="p">(</span><span class="s">&#39;Babina_adenopleura&#39;</span><span class="p">,</span> <span class="s">&#39;binomial&#39;</span><span class="p">,</span> <span class="s">&#39;taiwan&#39;</span><span class="p">,</span> <span class="s">&#39;iucn_status&#39;</span><span class="p">,</span>
<span class="go">                      &#39;amphibian_high_taxnomy&#39;, &#39;iucn_level&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="nresp.tab_attrlist">
<tt class="descclassname">nresp.</tt><tt class="descname">tab_attrlist</tt><big>(</big><em>&lt;table&gt;</em>, <em>&lt;col&gt;</em><span class="optional">[</span>, <em>criteria=''</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#nresp.tab_attrlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Export distinct attribute of a specific column from table</p>
<p>Returns:</p>
<p>list</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tab_attrlist</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s">&#39;cntry_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt>
<tt class="descclassname">nresp.</tt><tt class="descname">intst_geom_cntrytab</tt><big>(</big><em>self</em>, <em>cntry_tab</em>, <em>cntry</em>, <em>cntry_col</em>, <em>geo_tab</em>, <em>geo_col</em>, <em>cntry_geom='the_geom'</em>, <em>geo_geom='the_geom'</em><big>)</big></dt>
<dd><p>Examples:</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">nresp</span></tt> National responsibility and biodiversity assessment tools</a><ul>
<li><a class="reference internal" href="#functions">functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/nresp_api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">nresp 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Lin, Cheng-Tao.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>